<div class="container content-header">
  <div class="row">
    <div class="col-lg-8">
      <h1>
        <i class="fa fa-cubes"></i> Tests <small>Citrus integration test cases</small>
      </h1>
    </div>
    <div class="col-lg-4">
      <form>
        <autocomplete id="search-test" addon="search" placeholder="TestName" minLength="1" [items]="testNames" (selected)="onTestSelected($event)"></autocomplete>
      </form>
    </div>
  </div>
</div>

<div class="container">
  <div class="content-nav">
    <span>On this page you see all test cases in this project. Select a test and execute it with a run configuration.</span>
  </div>

  <div class="btn-group pull-right">
    <button type="button" class="btn btn-default" (click)="openTestList()">Open</button>
    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
    <ul class="dropdown-menu">
      <li *ngIf="packages.length == 0" role="presentation"><a role="menuitem" name="tests">No tests found</a></li>
      <li *ngFor="#package of packages" role="presentation" class="dropdown-submenu pull-left">
        <a role="menuitem" name="tests" class="clickable">{{package.name}}</a>
        <ul class="dropdown-menu" role="menu">
          <li *ngFor="#test of package.tests" role="presentation"><a role="menuitem" (click)="open(test)" name="{{test.name}}" class="clickable">{{test.name}}</a></li>
        </ul>
      </li>
    </ul>
  </div>

  <tabs dynamic="true" (selected)="onTabSelected($event)" (closed)="onTabClosed($event)">
    <tab *ngFor="#test of openTests" tab-id="{{test.name}}" tab-title="{{test.name}}" closable="true"></tab>
    <test-detail *ngIf="activeTest" [test]="activeTest"></test-detail>
  </tabs>

  <div *ngIf="openTests.length == 0" style="display: block; text-align: center; margin-top: 150px;">
    <h3>Open test(s)</h3>
    <p>Press 'O' to open test</p>
  </div>

  <div class="dialog"
       dialog-id="dialog-list-tests"
       dialog-title="List of tests"
       dialog-confirm="no">
    <div *ngIf="packages.length == 0" class="list-group-item">
      <h4><i class="fa fa-cubes"></i> No tests found</h4>
    </div>

    <div *ngFor="#package of packages">
      <h4><i class="fa fa-cubes"></i> {{package.name}}</h4>
      <ul class="list-group">
        <li *ngFor="#test of package.tests" class="list-group-item clickable" (click)="open(test);closeTestList()"><span>{{test.name}}</span></li>
      </ul>
    </div>
  </div>
</div>